# common variables for all the scripts (bash & python)
# vim:se ft=bash :

# state directory for cronjob runs
CRONJOB_STATE_DIR=~
# admin mail
CRONJOB_ADMIN_MAIL=repomirrorci@gentoo.org
# directory with repo-mirror-ci scripts
SCRIPT_DIR=/opt/repo-mirror-ci

# PORTAGE_CONFIGROOT to use for regular repos
CONFIG_ROOT=~/data
# PORTAGE_CONFIGROOT to use with mirrors (for CI)
CONFIG_ROOT_MIRROR=~/data-mirror
# PORTAGE_CONFIGROOT to use for syncing
CONFIG_ROOT_SYNC=~/data-sync
# PORTAGE_CONFIGROOT to use for gentoo-ci
# (it's copied from CONFIG_ROOT_MIRROR, with other repos stripped)
CONFIG_ROOT_GENTOO_CI=~/data-gentoo-ci
# initial storage for repositories (synced by PM)
SYNC_DIR=~/sync
# intermediate storage for repositories with metadata
REPOS_DIR=~/repos
# storage for repository mirrors
MIRROR_DIR=~/mirror
# repos.conf file path, relative to CONFIG_ROOT*
REPOS_CONF=etc/portage/repos.conf

# timeout for CI runs, in form acepted by timeout(1)
CI_TIMEOUT=45m
# timeout for cache regen (it can hang)
PMAINT_TIMEOUT=10m

# repos to sync
REPOS="
	gentoo:https://github.com/gentoo/gentoo
	guru:https://anongit.gentoo.org/git/repo/proj/guru
	kde:https://anongit.gentoo.org/git/proj/kde
	science:https://anongit.gentoo.org/git/proj/sci
"
# repositories that must have valid OpenPGP signatures
SIGNED_REPOS='gentoo'

# username for github bot login
GITHUB_USERNAME=gentoo-repo-qa-bot
# file with github oauth token
GITHUB_TOKEN_FILE=~/.github-token
# github organization holding all the mirrors
GITHUB_ORG=gentoo-mirror
# github repository for gentoo.git mirror (PRs)
GITHUB_REPO=gentoo/gentoo

CODEBERG_USERNAME=gentoo-bot
CODBERG_TOKEN_FILE=~/.codeberg-token
CODEBERG_ORG=gentoo
CODEBERG_REPO=gentoo/gentoo

# report/gentoo-ci.git checkout
GENTOO_CI_GIT=~/report/gentoo-ci
# pkgcheck-result-parser.git checkout
PKGCHECK_RESULT_PARSER_GIT=${SCRIPT_DIR}/pkgcheck2html

# URI prefix for gentoo-ci reports
GENTOO_CI_URI_PREFIX=https://qa-reports.gentoo.org/output/gentoo-ci
# E-mail address to mail gentoo-ci results to
GENTOO_CI_MAIL=gentoo-automated-testing@lists.gentoo.org
# URI to gitweb query for commit range, will have old..new appended
GENTOO_CI_GITWEB_URI="https://gitweb.gentoo.org/repo/gentoo.git/log/?qt=range&q="
# URI to gitweb query for single commit, will have id appended
GENTOO_CI_GITWEB_COMMIT_URI="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id="

# pull request storage root
PULL_REQUEST_DIR=~/pull
# pull request state db (pickle)
PULL_REQUEST_DB=${PULL_REQUEST_DIR}/state.pickle
# pull request source repository
PULL_REQUEST_REPO=https://github.com/gentoo/gentoo
# borked package rescan limit
PULL_REQUEST_BORKED_LIMIT=1000

# codeberg PR state db (pickle)
CODEBERG_PR_DB=${PULL_REQUEST_DIR}/codeberg-state.pickle

# options used for all-repo CI scans
PKGCHECK_OPTIONS="-p stable,dev --checks=+PerlCheck"
# options used for pull request scans
PKGCHECK_PR_OPTIONS="${PKGCHECK_OPTIONS} --cache=-git"
# pkgcheck options (for bisecting and comparing)
PKGCHECK_BISECT_OPTIONS="-s pkg,ver
	-p stable,dev"

# irc server
IRC_TO="ircs://croaker:$(cat ~/.croaker-password 2>/dev/null || :)@irc.libera.chat/#gentoo-dev"

# additional OpenPGP keys to include in keyring
GPG_EXTRA_KEYS='EF9538C9E8E64311A52CDEDFA13D0EF1914E7A72'

export CRONJOB_ADMIN_MAIL
export VIRTUAL_ENV
export SCRIPT_DIR
export CONFIG_ROOT
export CONFIG_ROOT_MIRROR
export CONFIG_ROOT_SYNC
export CONFIG_ROOT_GENTOO_CI
export SYNC_DIR
export REPOS_DIR
export MIRROR_DIR
export REPOS_CONF
export REGEN_THREADS
export CI_TIMEOUT
export PMAINT_TIMEOUT
export REPOS
export SIGNED_REPOS
export GITHUB_USERNAME
export GITHUB_TOKEN_FILE
export GITHUB_ORG
export GITHUB_REPO
export GENTOO_CI_GIT
export PKGCHECK_RESULT_PARSER_GIT
export GENTOO_CI_URI_PREFIX
export GENTOO_CI_MAIL
export GENTOO_CI_GITWEB_URI
export GENTOO_CI_GITWEB_COMMIT_URI
export PULL_REQUEST_DIR
export PULL_REQUEST_DB
export PULL_REQUEST_REPO
export PULL_REQUEST_BORKED_LIMIT
export PKGCHECK_OPTIONS
export PKGCHECK_PR_OPTIONS
export PKGCHECK_BISECT_OPTIONS
export IRC_TO
export GPG_EXTRA_KEYS
